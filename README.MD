# üìö RelationProject - Plateforme d'√âchange de Livres

[![PHP Version](https://img.shields.io/badge/PHP-8.1%2B-blue)](https://www.php.net/)
[![MySQL](https://img.shields.io/badge/MySQL-8.0-orange)](https://www.mysql.com/)
[![Docker](https://img.shields.io/badge/Docker-Ready-2496ED?logo=docker)](https://www.docker.com/)
[![PHPUnit](https://img.shields.io/badge/PHPUnit-12.4-green)](https://phpunit.de/)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

> Une plateforme web moderne permettant aux utilisateurs d'√©changer des livres, de g√©rer leurs collections et de communiquer entre eux via une messagerie int√©gr√©e.

---

## üéØ √Ä propos du projet

**RelationProject** est une application web PHP full-stack d√©velopp√©e avec une architecture MVC personnalis√©e. Elle permet aux passionn√©s de lecture de :
- Partager leurs livres avec la communaut√©
- D√©couvrir de nouveaux ouvrages
- √âchanger des messages avec d'autres lecteurs
- G√©rer leur profil et leur collection personnelle

---

## ‚ú® Fonctionnalit√©s principales

### üë§ Gestion des utilisateurs
- Inscription et connexion s√©curis√©es avec CSRF protection
- Profils personnalisables (photo, biographie, informations)
- Gestion de compte (modification des donn√©es, upload d'image)
- Consultation des profils publics d'autres utilisateurs

### üìñ Gestion des livres
- Ajout de livres √† sa collection (titre, auteur, description, cat√©gorie, image)
- √âdition et suppression de ses propres livres
- Navigation et recherche dans le catalogue complet
- Pagination intelligente des r√©sultats
- Affichage des d√©tails de chaque livre avec informations du propri√©taire

### üí¨ Messagerie int√©gr√©e
- Syst√®me de messagerie priv√©e entre utilisateurs
- Interface responsive (mobile & desktop)
- Liste des conversations avec aper√ßu du dernier message
- **Indicateurs de messages non lus** (badge + texte en gras)
- Envoi de messages depuis la page d'un livre
- Auto-scroll vers le bas de la conversation
- Envoi rapide avec la touche Entr√©e

### üîí S√©curit√©
- Protection CSRF sur tous les formulaires
- Validation des acc√®s utilisateur (AbstractController)
- Gestion des sessions PHP
- V√©rification des permissions (un utilisateur ne peut modifier que ses propres donn√©es)

---

## üöÄ Installation avec Docker

### Pr√©requis
- [Docker](https://www.docker.com/get-started) (version 20.10+)
- [Docker Compose](https://docs.docker.com/compose/install/) (version 2.0+)

### Installation rapide

1. **Cloner le repository**
```bash
git clone https://github.com/Dylan-Groux/RelationProject.git
cd RelationProject
```

2. **Lancer les conteneurs Docker**
```bash
docker-compose up -d
```

3. **Acc√©der √† l'application**
- Application principale : [http://localhost:8080/public](http://localhost:8080/public)
- phpMyAdmin : [http://localhost:8081](http://localhost:8081)
  - Utilisateur : `user`
  - Mot de passe : `secret`

### Configuration des services

Le projet utilise 3 conteneurs Docker :

| Service | Description | Port |
|---------|-------------|------|
| **app** | Serveur web PHP 8.1 avec Apache | 8080 |
| **db** | Base de donn√©es MySQL 8.0 | 3306 |
| **phpmyadmin** | Interface de gestion MySQL | 8081 |

### Commandes utiles

```bash
# Arr√™ter les conteneurs
docker-compose down

# Reconstruire les conteneurs
docker-compose up -d --build

# Voir les logs
docker-compose logs -f

# Acc√©der au conteneur PHP
docker exec -it php_app bash

# Lancer les tests
docker exec -it php_app ./vendor/bin/phpunit tests/
```

---

## üõ†Ô∏è Installation manuelle (sans Docker)

### Pr√©requis
- PHP 8.1 ou sup√©rieur
- MySQL 8.0 ou sup√©rieur
- Composer
- Serveur web (Apache/Nginx)

### √âtapes

1. **Cloner le projet**
```bash
git clone https://github.com/votre-username/RelationProject.git
cd RelationProject
```

2. **Installer les d√©pendances**
```bash
composer install
```

3. **Cr√©er la base de donn√©es**
```bash
mysql -u root -p < SQL/fixture/implementalltable_new.sql
```

4. **Configurer l'environnement**
Cr√©er un fichier `.env` √† la racine :
```env
DB_HOST=localhost
DB_NAME=relation_db
DB_USER=user
DB_PASSWORD=secret
```

5. **Configurer le serveur web**
Pointer le DocumentRoot vers le dossier `public/`

6. **Acc√©der √† l'application**
```
http://localhost/public
```

---

## üèóÔ∏è Architecture du projet

```
RelationProject/
‚îú‚îÄ‚îÄ docker/                 # Configuration Docker
‚îÇ   ‚îî‚îÄ‚îÄ php/               # Dockerfile PHP personnalis√©
‚îú‚îÄ‚îÄ lib/                   # Biblioth√®ques custom
‚îÇ   ‚îú‚îÄ‚îÄ EasyHeader.php    # Gestion des headers HTML
‚îÇ   ‚îî‚îÄ‚îÄ Router.php        # Syst√®me de routage
‚îú‚îÄ‚îÄ public/                # Point d'entr√©e public
‚îÇ   ‚îú‚îÄ‚îÄ index.php         # Front controller
‚îÇ   ‚îú‚îÄ‚îÄ css/              # Styles CSS
‚îÇ   ‚îú‚îÄ‚îÄ js/               # Scripts JavaScript
‚îÇ   ‚îú‚îÄ‚îÄ assets/           # Images et fichiers statiques
‚îÇ   ‚îî‚îÄ‚îÄ uploads/          # Uploads utilisateurs
‚îú‚îÄ‚îÄ SQL/                   # Scripts de base de donn√©es
‚îÇ   ‚îú‚îÄ‚îÄ fixture/          # Donn√©es de test
‚îÇ   ‚îî‚îÄ‚îÄ sch√©ma/           # Sch√©mas de tables
‚îú‚îÄ‚îÄ src/                   # Code source principal
‚îÇ   ‚îú‚îÄ‚îÄ Controllers/      # Contr√¥leurs MVC
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Abstract/     # Contr√¥leur abstrait
‚îÇ   ‚îú‚îÄ‚îÄ Models/           # Mod√®les de donn√©es
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Database/     # Gestion BDD
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Entity/       # Entit√©s m√©tier
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ DTO/      # Data Transfer Objects
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Repository/   # Couche d'acc√®s aux donn√©es
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Exceptions/   # Exceptions custom
‚îÇ   ‚îú‚îÄ‚îÄ Services/         # Logique m√©tier
‚îÇ   ‚îî‚îÄ‚îÄ Views/            # Templates PHP
‚îú‚îÄ‚îÄ tests/                 # Tests unitaires PHPUnit
‚îú‚îÄ‚îÄ vendor/                # D√©pendances Composer
‚îú‚îÄ‚îÄ composer.json          # Configuration Composer
‚îî‚îÄ‚îÄ docker-compose.yml     # Configuration Docker Compose
```

### Technologies utilis√©es

- **Backend** : PHP 8.1+ (POO, namespaces, attributes)
- **Base de donn√©es** : MySQL 8.0 avec PDO
- **Architecture** : MVC personnalis√© avec routing par attributes
- **Design Patterns** : Repository, DTO, Service Layer
- **Frontend** : HTML5, CSS3 (Grid/Flexbox), JavaScript vanilla
- **Tests** : PHPUnit 12.4
- **Containerisation** : Docker & Docker Compose

---

## üß™ Tests

Lancer les tests PHPUnit :

```bash
# Avec Docker
docker exec -it php_app ./vendor/bin/phpunit tests/

# Sans Docker
./vendor/bin/phpunit tests/
```

---

## üìù Routes principales

| M√©thode | Route | Description |
|---------|-------|-------------|
| GET | `/` | Page d'accueil |
| GET | `/books` | Liste des livres |
| GET | `/book/{id}` | D√©tail d'un livre |
| GET | `/user/{id}` | Profil public d'un utilisateur |
| GET | `/login` | Page de connexion |
| GET | `/register` | Page d'inscription |
| POST | `/login/userLogin` | Authentification |
| POST | `/register/userRegister` | Cr√©ation de compte |
| GET | `/messagerie/{userId}` | Liste des conversations |
| GET | `/messagerie/{userId}/conversation/{conversationId}` | Conversation sp√©cifique |
| POST | `/messagerie/conversation/{conversationId}/send` | Envoyer un message |
| GET | `/book/edit/{id}` | √âdition d'un livre |
| POST | `/book/update/{id}` | Mise √† jour d'un livre |
| GET | `/book/delete/{id}` | Suppression d'un livre |
| GET | `/user/account/{id}` | Page de compte utilisateur |
| POST | `/user/update/{id}` | Mise √† jour du profil |


## üë®‚Äçüíª Auteur

**Dylan** - D√©veloppeur Full Stack

---

## üôè Remerciements

- OpenClassrooms pour la structure de base et le suivi
- La communaut√© PHP pour les ressources et documentation

---

<div align="center">

**‚≠ê Si ce projet vous pla√Æt, n'h√©sitez pas √† lui donner une √©toile ! ‚≠ê**

</div>

## üóÑÔ∏è Base de donn√©es
La base de donn√©es est automatiquement cr√©√©e et peupl√©e au premier lancement gr√¢ce au fichier `SQL/fixture/implementalltable_new.sql`.
